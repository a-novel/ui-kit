{"version":3,"sources":["../../../src/components/layouts/Modal.tsx"],"sourcesContent":["import css from \"./Modal.module.css\";\n\nimport CloseIcon from \"@assets/icons/monochrome/close.svg\";\n\nimport { MouseEventHandler, ReactNode, Ref, forwardRef, useEffect, useMemo } from \"react\";\n\nimport { Container } from \"@components/wrappers\";\nimport { useWindow } from \"@contexts\";\nimport { useCaptureMessage } from \"@hooks\";\nimport { createPortal } from \"react-dom\";\n\nexport interface ModalProps {\n  children: ReactNode;\n  /**\n   * <span style=\"color: #32adff;\">Reference the container at the center of the page (not the wrapper).</span>\n   */\n  containerRef?: Ref<HTMLDivElement>;\n  /**\n   * <span style=\"color: #32adff;\">Display the modal.</span>\n   *\n   * Set false to hide the modal, or true to show it.\n   */\n  opened: boolean;\n  /**\n   * <span style=\"color: #32adff;\">Title of the modal.</span>\n   */\n  title: ReactNode;\n  /**\n   * <span style=\"color: #32adff;\">Close the modal.</span>\n   *\n   * Use this action to set opened to false, along with other cleanup.\n   */\n  onClose: MouseEventHandler<HTMLButtonElement>;\n}\n\nconst noPortalError =\n  \"Could not find the modals portal in DOM tree. \" +\n  \"This is likely a configuration mistake. \" +\n  \"Make sure the root layout is declaring a div with the id 'modals'.\";\n\n/**\n * <span style=\"color: #32adff;\">Show a modal over the application.</span>\n *\n * The modal requires a portal with the id <span style=\"color: #ff9300;\">\"modal\"</span>, at the root of the application\n * (to avoid conflicts with z-index).\n */\nexport const Modal = forwardRef<HTMLDivElement, ModalProps>(function Modal(\n  { children, opened, containerRef, title, onClose },\n  externalRef,\n) {\n  const { document } = useWindow();\n\n  useEffect(() => {\n    if (document == null) return;\n\n    // Prevent background scrolling when the modal is opened.\n    document.body.style.overflow = opened ? \"hidden\" : \"\";\n  }, [opened, document]);\n\n  const modalsPortal = useMemo(() => document?.getElementById(\"modals\"), [document]);\n\n  // This means the application is not properly configured. Don't display anything.\n  useCaptureMessage(noPortalError, document != null && modalsPortal == null);\n  if (modalsPortal == null) {\n    return null;\n  }\n\n  return createPortal(\n    <Container\n      ref={externalRef}\n      className={`${css.wrapper} ${opened ? css.opened : css.closed}`}\n      zIndex={1000000}\n      background=\"blurry\"\n      orientation=\"vertical\"\n      selfAlign=\"center\"\n    >\n      <Container\n        orientation=\"vertical\"\n        radius=\"normal\"\n        background=\"plain\"\n        border\n        align=\"center\"\n        width={40}\n        ref={containerRef}\n        className={css.container}\n      >\n        <Container\n          orientation=\"horizontal\"\n          width=\"full\"\n          radius=\"normal normal 0 0\"\n          selfAlign=\"space-between\"\n          className={css.header}\n          zIndex={100}\n          background=\"blurry\"\n        >\n          <div className={css.headerTitle}>{title}</div>\n          <button className={css.headerClose} onClick={onClose}>\n            <CloseIcon />\n          </button>\n        </Container>\n        <div className={css.modalContent}>{children}</div>\n      </Container>\n    </Container>,\n    modalsPortal,\n  );\n});\n"],"names":["css","CloseIcon","forwardRef","useEffect","useMemo","Container","useWindow","useCaptureMessage","createPortal","noPortalError","Modal","children","opened","containerRef","title","onClose","externalRef","document","body","style","overflow","modalsPortal","getElementById","ref","className","wrapper","closed","zIndex","background","orientation","selfAlign","radius","border","align","width","container","header","div","headerTitle","button","headerClose","onClick","modalContent"],"mappings":"wDAAA,QAAOA,QAAS,oBAAqB,AAErC,QAAOC,cAAe,oCAAqC,AAE3D,QAA4CC,UAAU,CAAEC,SAAS,CAAEC,OAAO,KAAQ,OAAQ,AAE1F,QAASC,SAAS,KAAQ,sBAAuB,AACjD,QAASC,SAAS,KAAQ,WAAY,AACtC,QAASC,iBAAiB,KAAQ,QAAS,AAC3C,QAASC,YAAY,KAAQ,WAAY,CA0BzC,MAAMC,cACJ,iDACA,2CACA,oEAQF,QAAO,MAAMC,MAAQR,WAAuC,SAASQ,MACnE,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,YAAY,CAAEC,KAAK,CAAEC,OAAO,CAAE,CAClDC,WAAW,EAEX,KAAM,CAAEC,QAAQ,CAAE,CAAGX,YAErBH,UAAU,KACR,GAAIc,UAAY,KAAM,MAGtBA,CAAAA,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAGR,OAAS,SAAW,EACrD,EAAG,CAACA,OAAQK,SAAS,EAErB,MAAMI,aAAejB,QAAQ,IAAMa,UAAUK,eAAe,UAAW,CAACL,SAAS,EAGjFV,kBAAkBE,cAAeQ,UAAY,MAAQI,cAAgB,MACrE,GAAIA,cAAgB,KAAM,CACxB,OAAO,IACT,CAEA,OAAOb,aACL,KAACH,WACCkB,IAAKP,YACLQ,UAAW,CAAC,EAAExB,IAAIyB,OAAO,CAAC,CAAC,EAAEb,OAASZ,IAAIY,MAAM,CAAGZ,IAAI0B,MAAM,CAAC,CAAC,CAC/DC,OAAQ,IACRC,WAAW,SACXC,YAAY,WACZC,UAAU,kBAEV,MAACzB,WACCwB,YAAY,WACZE,OAAO,SACPH,WAAW,QACXI,MAAM,MACNC,MAAM,SACNC,MAAO,GACPX,IAAKV,aACLW,UAAWxB,IAAImC,SAAS,WAExB,MAAC9B,WACCwB,YAAY,aACZK,MAAM,OACNH,OAAO,oBACPD,UAAU,gBACVN,UAAWxB,IAAIoC,MAAM,CACrBT,OAAQ,IACRC,WAAW,mBAEX,KAACS,OAAIb,UAAWxB,IAAIsC,WAAW,UAAGxB,QAClC,KAACyB,UAAOf,UAAWxB,IAAIwC,WAAW,CAAEC,QAAS1B,iBAC3C,KAACd,mBAGL,KAACoC,OAAIb,UAAWxB,IAAI0C,YAAY,UAAG/B,gBAGvCU,aAEJ,EAAG"}