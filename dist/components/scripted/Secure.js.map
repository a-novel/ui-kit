{"version":3,"sources":["../../../src/components/scripted/Secure.tsx"],"sourcesContent":["import { FC, ReactNode, useEffect } from \"react\";\n\nimport { ErrorPage, ErrorPageProps, LoadingPage, LoadingPageProps } from \"@components/pages\";\nimport { useEventRedirect } from \"@contexts\";\n\nexport interface SessionStatus {\n  /**\n   * <span style=\"color: #32adff;\">Indicate session status is loading.</span>\n   *\n   * When returned, display a loading page with the given props.\n   */\n  loaderProps?: LoadingPageProps;\n  /**\n   * <span style=\"color: #32adff;\">Indicate an error occurred while checking session.</span>\n   *\n   * When returned, display an error page with the given props.\n   */\n  errorProps?: ErrorPageProps;\n  /**\n   * <span style=\"color: #32adff;\">Indicate session is authenticated.</span>\n   *\n   * Undefined means the session check has not completed. Once true or false, the session checker will decide on the\n   * next step.\n   */\n  authenticated?: boolean;\n}\n\nexport interface SessionCheckerProps {\n  status: SessionStatus;\n  children: ReactNode;\n}\n\n/**\n * <span style=\"color: #32adff;\">Auto handle UI for pages that require authentication.</span>\n *\n * Switch between components depending on the status of the session.\n */\nexport const SessionChecker: FC<SessionCheckerProps> = ({ status, children }) => {\n  const { savePathAndRedirect } = useEventRedirect();\n\n  useEffect(() => {\n    if (status.authenticated === false) {\n      savePathAndRedirect();\n    }\n  }, [status.authenticated, savePathAndRedirect]);\n\n  if (status.loaderProps) return <LoadingPage {...status.loaderProps} />;\n  if (status.errorProps) return <ErrorPage {...status.errorProps} />;\n\n  if (!status.authenticated) return null;\n\n  return <>{children}</>;\n};\n"],"names":["useEffect","ErrorPage","LoadingPage","useEventRedirect","SessionChecker","status","children","savePathAndRedirect","authenticated","loaderProps","errorProps"],"mappings":"gEAAA,QAAwBA,SAAS,KAAQ,OAAQ,AAEjD,QAASC,SAAS,CAAkBC,WAAW,KAA0B,mBAAoB,AAC7F,QAASC,gBAAgB,KAAQ,WAAY,AAkC7C,QAAO,MAAMC,eAA0C,CAAC,CAAEC,MAAM,CAAEC,QAAQ,CAAE,IAC1E,KAAM,CAAEC,mBAAmB,CAAE,CAAGJ,mBAEhCH,UAAU,KACR,GAAIK,OAAOG,aAAa,GAAK,MAAO,CAClCD,qBACF,CACF,EAAG,CAACF,OAAOG,aAAa,CAAED,oBAAoB,EAE9C,GAAIF,OAAOI,WAAW,CAAE,OAAO,KAACP,aAAa,GAAGG,OAAOI,WAAW,GAClE,GAAIJ,OAAOK,UAAU,CAAE,OAAO,KAACT,WAAW,GAAGI,OAAOK,UAAU,GAE9D,GAAI,CAACL,OAAOG,aAAa,CAAE,OAAO,KAElC,OAAO,yBAAGF,UACZ,CAAE"}